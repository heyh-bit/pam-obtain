name: action.yml demo

on: 
  issue_comment:
    types: [created, deleted]
  issues:
    types: [opened, edited, milestoned]

jobs:
  hello_world_job:
    runs-on: [self-hosted]
    name: A job to say hello
    steps:
      - id: foo
        uses: heyh-bit/pam-obtain@v14
        with:
          who-to-greet: 'Mona the Octocat'
          app-id: "test"
          user-name: "root"
          asset-name: "resource"
          requiest-reason: "test demo"
          connect-host: "10.13.1.2"
      - run: echo random-number "$RANDOM_NUMBER"
        shell: bash
        env:
          RANDOM_NUMBER: ${{ steps.foo.outputs.random-number }}
      - name: Get the output time
        env:
          DEMO111 : ${{ steps.foo.outputs.abc }}
        run: echo "The time was $DEMO111"
      - name: echo git-output
        run: |
          cat $GITHUB_OUTPUT
      - id: step2
        uses: heyh-bit/pam-obtain@v14
        with:
          who-to-greet: 'Mona the Octocat'
          app-id: "aaa"
          user-name: "aaa"
          asset-name: "aaa"
          requiest-reason: "aaa"
          connect-host: "1.1.1.1"
          credential-file: "/opt/helloworld"
